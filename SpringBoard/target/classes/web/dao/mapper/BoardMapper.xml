<?xml version="1.0" encoding="UTF-8"?>

<!-- 마이바티스 3 Mapper DOCTYPE -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="web.dao.face.BoardDao">

	<resultMap type="web.dto.Board" id="Board">
		<result column="board_no" property="boardNo" />
		<result column="writer_id" property="writerId" />
		<result column="writer_nick" property="writerNick" />
		<result column="write_date" property="writeDate" />
	</resultMap>

	<select id="selectBoardList" resultMap="Board" parameterType="web.util.Paging">
		SELECT * FROM (
		    SELECT rownum rnum, B.* FROM (
		        SELECT board_no, title, content, writer_id, writer_nick, hit, write_date
		        FROM BOARD
		        ORDER BY board_no DESC
		    ) B
		) BOARD
		WHERE rnum BETWEEN #{startNo } AND #{endNo }
	</select>
	
	<select id="selectCntAll" resultType="int">
		SELECT COUNT (*) FROM BOARD
	</select>
	
	<select id="selectBoardByBoardNo" resultMap="Board">
        SELECT board_no, title, content, writer_id, writer_nick, hit, write_date
        FROM BOARD
        WHERE board_no = #{boardNo }  
	</select>
	
	<update id="updateHit">
		UPDATE BOARD
		SET hit = hit + 1
		WHERE board_no = #{boardNo }
	</update>
	
	<insert id="insertBoard" parameterType="web.dto.Board">
		INSERT INTO BOARD (title, content, writer_id, writer_nick)
		VALUES (#{title }, #{content }, #{id }, #{nick })
	</insert>

</mapper>